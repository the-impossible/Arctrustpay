document.addEventListener("DOMContentLoaded",(function(){let e=new Date,t=e.getFullYear(),n=e.getMonth(),l=e.getDate(),a=document.getElementById("calendar"),d=document.getElementById("inputExample"),i=document.querySelectorAll('input[type="date"]')[0],o=document.querySelectorAll('input[type="date"]')[1],s=document.getElementById("description"),r=[{id:"1",title:"World Braille Day",start:"2024-10-01",className:"bg-success-subtle",allDay:!0,extendedProps:{label:"Holiday",description:"Celebrating the importance of Braille."}},{id:"2",title:"World Leprosy Day",start:"2024-10-22",className:"bg-primary-subtle",allDay:!0,extendedProps:{label:"Meeting",description:"Raising awareness about leprosy."}},{id:"3",title:"All Day Event",start:new Date(t,n,1),className:"bg-primary-subtle",allDay:!0,extendedProps:{label:"Meeting",description:"General all-day event."}},{id:"4",title:"Birthday Party",start:new Date(t,n,l+1),className:"bg-danger-subtle",allDay:!0,extendedProps:{label:"Birthday",description:"Celebrating a friend's birthday."}},{id:"5",title:"Repeating Event",start:new Date(t,n,l+4),end:new Date(t,n,l+9),className:"bg-warning-subtle",allDay:!0,extendedProps:{label:"Deadline",description:"A repeating event over multiple days."}},{id:"6",title:"Weekend Trip",start:new Date(t,n,l+15),className:"bg-success-subtle",allDay:!0,extendedProps:{label:"Holiday",description:"Weekend trip to relax and enjoy nature."}},{id:"7",title:"Medical Leave",start:new Date(t,n,l-2),className:"bg-info-subtle",allDay:!0,extendedProps:{label:"Sick Leave",description:"Medical leave due to illness."}},{id:"8",title:"Company Annual Meeting",start:new Date(t,n,l+10),className:"bg-primary-subtle",allDay:!0,extendedProps:{label:"Meeting",description:"Annual company-wide meeting."}},{id:"9",title:"Project Deadline",start:new Date(t,n,l+18),className:"bg-warning-subtle",allDay:!0,extendedProps:{label:"Deadline",description:"Final submission deadline for project."}},{id:"15",title:"National Holiday",start:new Date(t,n,l+20),className:"bg-success-subtle",allDay:!0,extendedProps:{label:"Holiday",description:"Public national holiday."}},{id:"16",title:"Training Session",start:new Date(t,n,l+11),className:"bg-primary-subtle",allDay:!0,extendedProps:{label:"Meeting",description:"Employee training and skill development."}},{id:"17",title:"Financial Report Submission",start:new Date(t,n,l+9),className:"bg-warning-subtle",allDay:!0,extendedProps:{label:"Deadline",description:"Deadline for financial report submission."}},{id:"18",title:"Kids' Sports Day",start:new Date(t,n,l+6),className:"bg-danger-subtle",allDay:!0,extendedProps:{label:"Birthday",description:"A fun sports event for kids."}},{id:"19",title:"Camping Trip",start:new Date(t,n,l+14),className:"bg-success-subtle",allDay:!0,extendedProps:{label:"Holiday",description:"Outdoor camping with friends and family."}},{id:"20",title:"Health Checkup",start:new Date(t,n,l-1),className:"bg-info-subtle",allDay:!0,extendedProps:{label:"Sick Leave",description:"Routine health checkup."}}],c=new FullCalendar.Calendar(a,{initialView:"dayGridMonth",selectable:!0,editable:!0,droppable:!0,events:r,eventReceive:function(e){console.log("Adding")},eventClick:function(e){let t=e.event,n=document.getElementById("eventDetailsTitleText"),l=document.getElementById("eventDetailsLabel"),a=document.getElementById("eventDetailsStart"),d=document.getElementById("eventDetailsEnd"),i=document.getElementById("eventDetailsDescription");n&&(n.innerText=t.title||"No Title"),l&&(l.innerText=t.extendedProps.label||"No Label"),a&&(a.innerText=t.start?t.start.toISOString().split("T")[0]:"N/A"),d&&(d.innerText=t.end?t.end.toISOString().split("T")[0]:"N/A"),i&&(i.innerText=t.extendedProps.description||"No Description"),document.getElementById("eventId").value=t.id||"",new bootstrap.Modal(document.getElementById("eventDetailsModal")).show(),document.getElementById("deleteEventBtn").onclick=function(){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((e=>{if(e.isConfirmed){t.remove(),Swal.fire("Deleted!","Your event has been deleted.","success");let e=document.getElementById("eventDetailsModal");bootstrap.Modal.getInstance(e).hide()}}))},document.getElementById("editEventBtn").onclick=function(){let e=document.getElementById("eventDetailsModal");bootstrap.Modal.getInstance(e).hide();let n=document.getElementById("inputExample"),l=document.getElementById("form-select-01"),a=document.querySelectorAll('input[type="date"]')[0],d=document.querySelectorAll('input[type="date"]')[1],i=document.getElementById("description");n&&(n.value=t.title||""),l&&(l.value=t.extendedProps.label||""),a&&(a.value=t.start?t.start.toISOString().split("T")[0]:""),d&&(d.value=t.end?t.end.toISOString().split("T")[0]:""),i&&(i.value=t.extendedProps.description||""),new bootstrap.Modal(document.getElementById("exampleModalToggle")).show()}},dateClick:function(e){i.value=e.dateStr,o.value=e.dateStr,d.value="",s.value="",document.getElementById("eventId").value="",new bootstrap.Modal(document.getElementById("exampleModalToggle")).show()}});c.render(),document.getElementById("form-event").addEventListener("submit",(function(e){e.preventDefault();let t=document.getElementById("eventId").value,n=document.getElementById("inputExample").value,l=document.querySelectorAll('input[type="date"]')[0].value,a=document.querySelectorAll('input[type="date"]')[1].value||l,d=document.getElementById("description").value,i=document.getElementById("form-select-01").selectedOptions[0].text;if(!n.trim())return void(document.getElementById("titleErr").innerText="Event title is required!");document.getElementById("titleErr").innerText="",l=new Date(l+"T00:00:00"),a=new Date(a+"T23:59:59");let o=c.getEventById(t);o?(o.setProp("title",n),o.setStart(l),o.setEnd(a),o.setExtendedProp("description",d),o.setExtendedProp("label",i)):c.addEvent({title:n,start:l,end:a,allDay:!0,className:"bg-info-subtle",extendedProps:{label:i,description:d}}),document.getElementById("form-event").reset();let s=document.getElementById("exampleModalToggle");bootstrap.Modal.getInstance(s).hide()}));let u=document.getElementById("external-events-container");new FullCalendar.Draggable(u,{itemSelector:".external-event",eventData:function(e){return{title:e.getAttribute("data-title"),classNames:[e.getAttribute("data-class")],allDay:!0}}})}));