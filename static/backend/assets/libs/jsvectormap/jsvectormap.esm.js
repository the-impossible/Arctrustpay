var isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"==typeof e}function isSpecial(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||isNode(e)||isReactElement(e)}var canUseSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function isNode(e){return e instanceof Node}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,i){return e.concat(t).map((function(e){return cloneUnlessOtherwiseSpecified(e,i)}))}function getMergeFunction(e,t){if(!t.customMerge)return deepmerge;var i=t.customMerge(e);return"function"==typeof i?i:deepmerge}function getEnumerableOwnPropertySymbols(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}function getKeys(e){return Object.keys(e).concat(getEnumerableOwnPropertySymbols(e))}function propertyIsOnObject(e,t){try{return t in e}catch(e){return!1}}function propertyIsUnsafe(e,t){return propertyIsOnObject(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function mergeObject(e,t,i){var s={};return i.isMergeableObject(e)&&getKeys(e).forEach((function(t){s[t]=cloneUnlessOtherwiseSpecified(e[t],i)})),getKeys(t).forEach((function(n){propertyIsUnsafe(e,n)||(propertyIsOnObject(e,n)&&i.isMergeableObject(t[n])?s[n]=getMergeFunction(n,i)(e[n],t[n],i):s[n]=cloneUnlessOtherwiseSpecified(t[n],i))})),s}var deepmerge=function(e,t,i){(i=i||{}).arrayMerge=i.arrayMerge||defaultArrayMerge,i.isMergeableObject=i.isMergeableObject||isMergeableObject,i.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var s=Array.isArray(t);return s===Array.isArray(e)?s?i.arrayMerge(e,t,i):mergeObject(e,t,i):cloneUnlessOtherwiseSpecified(t,i)},getElement=function(e){return"object"==typeof e&&void 0!==e.nodeType?e:"string"==typeof e?document.querySelector(e):null},createElement=function(e,t,i,s){void 0===s&&(s=!1);var n=document.createElement(e);return i&&(n[s?"innerHTML":"textContent"]=i),t&&(n.className=t),n},findElement=function(e,t){return Element.prototype.querySelector.call(e,t)},removeElement=function(e){e.parentNode.removeChild(e)},isImageUrl=function(e){return/\.(jpg|gif|png)$/.test(e)},hyphenate=function(e){return e.replace(/[\w]([A-Z])/g,(function(e){return e[0]+"-"+e[1]})).toLowerCase()},merge=function(e,t,i){return void 0===i&&(i=!1),i?deepmerge(e,t):Object.assign(e,t)},getLineUid=function(e,t){return e.toLowerCase()+":to:"+t.toLowerCase()},inherit=function(e,t){Object.assign(e.prototype,t)},eventRegistry={},eventUid=1,EventHandler={on:function(e,t,i,s){void 0===s&&(s={});var n="jvm:"+t+"::"+eventUid++;eventRegistry[n]={selector:e,handler:i},i._uid=n,e.addEventListener(t,i,s)},delegate:function(e,t,i,s){(t=t.split(" ")).forEach((function(t){EventHandler.on(e,t,(function(e){var t=e.target;t.matches(i)&&s.call(t,e)}))}))},off:function(e,t,i){var s=t.split(":")[1];e.removeEventListener(s,i),delete eventRegistry[i._uid]},flush:function(){Object.keys(eventRegistry).forEach((function(e){EventHandler.off(eventRegistry[e].selector,e,eventRegistry[e].handler)}))},getEventRegistry:function(){return eventRegistry}};function setupContainerEvents(){var e,t,i=this,s=this,n=!1;this.params.draggable&&(EventHandler.on(this.container,"mousemove",(function(i){if(!n)return!1;s.transX-=(e-i.pageX)/s.scale,s.transY-=(t-i.pageY)/s.scale,s._applyTransform(),e=i.pageX,t=i.pageY})),EventHandler.on(this.container,"mousedown",(function(i){return n=!0,e=i.pageX,t=i.pageY,!1})),EventHandler.on(document.body,"mouseup",(function(){n=!1}))),this.params.zoomOnScroll&&EventHandler.on(this.container,"wheel",(function(e){var t=75*((e.deltaY||-e.wheelDelta||e.detail)>>10||1),n=i.container.getBoundingClientRect(),r=e.pageX-n.left-window.pageXOffset,a=e.pageY-n.top-window.pageYOffset,o=Math.pow(1+s.params.zoomOnScrollSpeed/1e3,-1.5*t);s.tooltip&&s._tooltip.hide(),s._setScale(s.scale*o,r,a),e.preventDefault()}))}var Events={onLoaded:"map:loaded",onViewportChange:"viewport:changed",onRegionClick:"region:clicked",onMarkerClick:"marker:clicked",onRegionSelected:"region:selected",onMarkerSelected:"marker:selected",onRegionTooltipShow:"region.tooltip:show",onMarkerTooltipShow:"marker.tooltip:show",onDestroyed:"map:destroyed"},parseEvent=function(e,t,i){var s=getElement(t),n=-1===s.getAttribute("class").indexOf("jvm-region")?"marker":"region",r="region"===n,a=r?s.getAttribute("data-code"):s.getAttribute("data-index"),o=r?Events.onRegionSelected:Events.onMarkerSelected;return i&&(o=r?Events.onRegionTooltipShow:Events.onMarkerTooltipShow),{type:n,code:a,event:o,element:r?e.regions[a].element:e._markers[a].element,tooltipText:r?e._mapData.paths[a].name||"":e._markers[a].config.name||""}};function setupElementEvents(){var e,t,i,s=this,n=this.container;EventHandler.on(n,"mousemove",(function(s){Math.abs(e-s.pageX)+Math.abs(t-s.pageY)>2&&(i=!0)})),EventHandler.delegate(n,"mousedown",".jvm-element",(function(s){e=s.pageX,t=s.pageY,i=!1})),EventHandler.delegate(n,"mouseover mouseout",".jvm-element",(function(e){var t=parseEvent(s,this,!0),i=s.params.showTooltip;"mouseover"===e.type?(t.element.hover(!0),i&&(s._tooltip.text(t.tooltipText),s._tooltip.show(),s._emit(t.event,[e,s._tooltip,t.code]))):(t.element.hover(!1),i&&s._tooltip.hide())})),EventHandler.delegate(n,"mouseup",".jvm-element",(function(e){var t=parseEvent(s,this);if(!i&&("region"===t.type&&s.params.regionsSelectable||"marker"===t.type&&s.params.markersSelectable)){var n=t.element;s.params[t.type+"sSelectableOne"]&&s._clearSelected(t.type+"s"),t.element.isSelected?n.select(!1):n.select(!0),s._emit(t.event,[t.code,n.isSelected,s._getSelected(t.type+"s")])}})),EventHandler.delegate(n,"click",".jvm-element",(function(e){var t=parseEvent(s,this),i=t.type,n=t.code;s._emit("region"===i?Events.onRegionClick:Events.onMarkerClick,[e,n])}))}function setupZoomButtons(){var e=this,t=createElement("div","jvm-zoom-btn jvm-zoomin","&#43;",!0),i=createElement("div","jvm-zoom-btn jvm-zoomout","&#x2212",!0);this.container.appendChild(t),this.container.appendChild(i);var s=function(t){return void 0===t&&(t=!0),function(){return e._setScale(t?e.scale*e.params.zoomStep:e.scale/e.params.zoomStep,e._width/2,e._height/2,!1,e.params.zoomAnimate)}};EventHandler.on(t,"click",s()),EventHandler.on(i,"click",s(!1))}function setupContainerTouchEvents(){var e,t,i,s,n,r,a,o=this,l=function(l){var h,c,p,u,d=l.touches;if("touchstart"==l.type&&(a=0),1==d.length)1==a&&(p=o.transX,u=o.transY,o.transX-=(i-d[0].pageX)/o.scale,o.transY-=(s-d[0].pageY)/o.scale,o._tooltip.hide(),o._applyTransform(),p==o.transX&&u==o.transY||l.preventDefault()),i=d[0].pageX,s=d[0].pageY;else if(2==d.length)if(2==a)c=Math.sqrt(Math.pow(d[0].pageX-d[1].pageX,2)+Math.pow(d[0].pageY-d[1].pageY,2))/t,o._setScale(e*c,n,r),o._tooltip.hide(),l.preventDefault();else{var f=o.container.getBoundingClientRect();h={top:f.top+window.scrollY,left:f.left+window.scrollX},n=d[0].pageX>d[1].pageX?d[1].pageX+(d[0].pageX-d[1].pageX)/2:d[0].pageX+(d[1].pageX-d[0].pageX)/2,r=d[0].pageY>d[1].pageY?d[1].pageY+(d[0].pageY-d[1].pageY)/2:d[0].pageY+(d[1].pageY-d[0].pageY)/2,n-=h.left,r-=h.top,e=o.scale,t=Math.sqrt(Math.pow(d[0].pageX-d[1].pageX,2)+Math.pow(d[0].pageY-d[1].pageY,2))}a=d.length};EventHandler.on(o.container,"touchstart",l),EventHandler.on(o.container,"touchmove",l)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _createForOfIteratorHelperLoose(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},_extends.apply(null,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}var BaseComponent=function(){function e(){}return e.prototype.dispose=function(){this._tooltip?removeElement(this._tooltip):this.shape.remove();for(var e,t=_createForOfIteratorHelperLoose(Object.getOwnPropertyNames(this));!(e=t()).done;)this[e.value]=null},e}(),Interactable={getLabelText:function(e,t){if(t){if("function"==typeof t.render){var i=[];return this.config&&this.config.marker&&i.push(this.config.marker),i.push(e),t.render.apply(this,i)}return e}},getLabelOffsets:function(e,t){return"function"==typeof t.offsets?t.offsets(e):Array.isArray(t.offsets)?t.offsets[e]:[0,0]},setStyle:function(e,t){this.shape.setStyle(e,t)},remove:function(){this.shape.remove(),this.label&&this.label.remove()},hover:function(e){this._setStatus("isHovered",e)},select:function(e){this._setStatus("isSelected",e)},_setStatus:function(e,t){this.shape[e]=t,this.shape.updateStyle(),this[e]=t,this.label&&(this.label[e]=t,this.label.updateStyle())}},Region=function(e){function t(t){var i,s=t.map,n=t.code,r=t.path,a=t.style,o=t.label,l=t.labelStyle,h=t.labelsGroup;(i=e.call(this)||this)._map=s,i.shape=i._createRegion(r,n,a);var c=i.getLabelText(n,o);if(o&&c){var p=i.shape.getBBox(),u=i.getLabelOffsets(n,o);i.labelX=p.x+p.width/2+u[0],i.labelY=p.y+p.height/2+u[1],i.label=i._map.canvas.createText({text:c,textAnchor:"middle",alignmentBaseline:"central",dataCode:n,x:i.labelX,y:i.labelY},l,h),i.label.addClass("jvm-region jvm-element")}return i}_inheritsLoose(t,e);var i=t.prototype;return i._createRegion=function(e,t,i){return(e=this._map.canvas.createPath({d:e,dataCode:t},i)).addClass("jvm-region jvm-element"),e},i.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this._map.scale+this._map.transX*this._map.scale,y:this.labelY*this._map.scale+this._map.transY*this._map.scale})},t}(BaseComponent);function createRegions(){for(var e in this._regionLabelsGroup=this._regionLabelsGroup||this.canvas.createGroup("jvm-regions-labels-group"),this._mapData.paths){var t=new Region({map:this,code:e,path:this._mapData.paths[e].path,style:merge({},this.params.regionStyle),labelStyle:this.params.regionLabelStyle,labelsGroup:this._regionLabelsGroup,label:this.params.labels&&this.params.labels.regions});this.regions[e]={config:this._mapData.paths[e],element:t}}}inherit(Region,Interactable);var Line=function(e){function t(t){var i,s=t.index,n=t.map,r=t.style,a=t.x1,o=t.y1,l=t.x2,h=t.y2,c=t.group,p=t.config;return(i=e.call(this)||this).config=p,i.shape=n.canvas.createLine({x1:a,y1:o,x2:l,y2:h,dataIndex:s},r,c),i.shape.addClass("jvm-line"),i}return _inheritsLoose(t,e),t.prototype.setStyle=function(e,t){this.shape.setStyle(e,t)},t}(BaseComponent);function createLines(e,t,i){void 0===i&&(i=!1);var s=!1,n=!1;for(var r in this.linesGroup=this.linesGroup||this.canvas.createGroup("jvm-lines-group"),e){var a=e[r];for(var o in t){var l=i?t[o].config:t[o];l.name===a.from&&(s=this.getMarkerPosition(l)),l.name===a.to&&(n=this.getMarkerPosition(l))}!1!==s&&!1!==n&&(this._lines[getLineUid(a.from,a.to)]=new Line({index:r,map:this,style:merge({initial:this.params.lineStyle},{initial:a.style||{}},!0),x1:s.x,y1:s.y,x2:n.x,y2:n.y,group:this.linesGroup,config:a}))}}var Marker=function(e){function t(t){var i,s=t.index,n=t.style,r=t.label,a=t.cx,o=t.cy,l=t.map,h=t.group;return(i=e.call(this)||this)._map=l,i._isImage=!!n.initial.image,i.config=arguments[0],i.shape=l.canvas[i._isImage?"createImage":"createCircle"]({dataIndex:s,cx:a,cy:o},n,h),i.shape.addClass("jvm-marker jvm-element"),i._isImage&&i.updateLabelPosition(),r&&i._createLabel(i.config),i}_inheritsLoose(t,e);var i=t.prototype;return i.updateLabelPosition=function(){this.label&&this.label.set({x:this._labelX*this._map.scale+this._offsets[0]+this._map.transX*this._map.scale+5+(this._isImage?(this.shape.width||0)/2:this.shape.node.r.baseVal.value),y:this._labelY*this._map.scale+this._map.transY*this._map.scale+this._offsets[1]})},i._createLabel=function(e){var t=e.index,i=e.map,s=e.label,n=e.labelsGroup,r=e.cx,a=e.cy,o=e.marker,l=e.isRecentlyCreated,h=this.getLabelText(t,s);this._labelX=r/i.scale-i.transX,this._labelY=a/i.scale-i.transY,this._offsets=l&&o.offsets?o.offsets:this.getLabelOffsets(t,s),this.label=i.canvas.createText({text:h,dataIndex:t,x:this._labelX,y:this._labelY,dy:"0.6ex"},i.params.markerLabelStyle,n),this.label.addClass("jvm-marker jvm-element"),l&&this.updateLabelPosition()},t}(BaseComponent);function createMarkers(e,t){var i=this;void 0===e&&(e={}),void 0===t&&(t=!1),this._markersGroup=this._markersGroup||this.canvas.createGroup("jvm-markers-group"),this._markerLabelsGroup=this._markerLabelsGroup||this.canvas.createGroup("jvm-markers-labels-group");var s=function(){var s=e[n],r=i.getMarkerPosition(s),a=s.coords.join(":");if(!r)return 0;if(t){if(Object.keys(i._markers).filter((function(e){return i._markers[e]._uid===a})).length)return 0;n=Object.keys(i._markers).length}var o=new Marker({index:n,map:i,style:merge(i.params.markerStyle,_extends({},s.style||{}),!0),label:i.params.labels&&i.params.labels.markers,labelsGroup:i._markerLabelsGroup,cx:r.x,cy:r.y,group:i._markersGroup,marker:s,isRecentlyCreated:t});i._markers[n]&&i.removeMarkers([n]),i._markers[n]={_uid:a,config:s,element:o}};for(var n in e)s()}inherit(Marker,Interactable);var Legend=function(){function e(e){void 0===e&&(e={}),this._options=e,this._map=this._options.map,this._series=this._options.series,this._body=createElement("div","jvm-legend"),this._options.cssClass&&this._body.setAttribute("class",this._options.cssClass),e.vertical?this._map.legendVertical.appendChild(this._body):this._map.legendHorizontal.appendChild(this._body),this.render()}return e.prototype.render=function(){var e=this._series.scale.getTicks(),t=createElement("div","jvm-legend-inner");if(this._body.innderHTML="",this._options.title){var i=createElement("div","jvm-legend-title",this._options.title);this._body.appendChild(i)}this._body.appendChild(t);for(var s=0;s<e.length;s++){var n=createElement("div","jvm-legend-tick"),r=createElement("div","jvm-legend-tick-sample");switch(this._series.config.attribute){case"fill":isImageUrl(e[s].value)?r.style.background="url("+e[s].value+")":r.style.background=e[s].value;break;case"stroke":r.style.background=e[s].value;break;case"image":r.style.background="url("+("object"==typeof e[s].value?e[s].value.url:e[s].value)+") no-repeat center center",r.style.backgroundSize="cover"}n.appendChild(r);var a=e[s].label;this._options.labelRender&&(a=this._options.labelRender(a));var o=createElement("div","jvm-legend-tick-text",a);n.appendChild(o),t.appendChild(n)}},e}(),OrdinalScale=function(){function e(e){this._scale=e}var t=e.prototype;return t.getValue=function(e){return this._scale[e]},t.getTicks=function(){var e=[];for(var t in this._scale)e.push({label:t,value:this._scale[t]});return e},e}(),Series=function(){function e(e,t,i){void 0===e&&(e={}),this._map=i,this._elements=t,this._values=e.values||{},this.config=e,this.config.attribute=e.attribute||"fill",e.attributes&&this.setAttributes(e.attributes),"object"==typeof e.scale&&(this.scale=new OrdinalScale(e.scale)),this.config.legend&&(this.legend=new Legend(merge({map:this._map,series:this},this.config.legend))),this.setValues(this._values)}var t=e.prototype;return t.setValues=function(e){var t={};for(var i in e)e[i]&&(t[i]=this.scale.getValue(e[i]));this.setAttributes(t)},t.setAttributes=function(e){for(var t in e)this._elements[t]&&this._elements[t].element.setStyle(this.config.attribute,e[t])},t.clear=function(){var e,t={};for(e in this._values)this._elements[e]&&(t[e]=this._elements[e].element.shape.style.initial[this.config.attribute]);this.setAttributes(t),this._values={}},e}();function createSeries(){for(var e in this.series={markers:[],regions:[]},this.params.series)for(var t=0;t<this.params.series[e].length;t++)this.series[e][t]=new Series(this.params.series[e][t],"markers"===e?this._markers:this.regions,this)}function applyTransform(){var e,t,i,s;this._defaultWidth*this.scale<=this._width?(e=(this._width-this._defaultWidth*this.scale)/(2*this.scale),i=(this._width-this._defaultWidth*this.scale)/(2*this.scale)):(e=0,i=(this._width-this._defaultWidth*this.scale)/this.scale),this._defaultHeight*this.scale<=this._height?(t=(this._height-this._defaultHeight*this.scale)/(2*this.scale),s=(this._height-this._defaultHeight*this.scale)/(2*this.scale)):(t=0,s=(this._height-this._defaultHeight*this.scale)/this.scale),this.transY>t?this.transY=t:this.transY<s&&(this.transY=s),this.transX>e?this.transX=e:this.transX<i&&(this.transX=i),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this._markers&&this._repositionMarkers(),this._lines&&this._repositionLines(),this._repositionLabels()}function resize(){var e=this._baseScale;this._width/this._height>this._defaultWidth/this._defaultHeight?(this._baseScale=this._height/this._defaultHeight,this._baseTransX=Math.abs(this._width-this._defaultWidth*this._baseScale)/(2*this._baseScale)):(this._baseScale=this._width/this._defaultWidth,this._baseTransY=Math.abs(this._height-this._defaultHeight*this._baseScale)/(2*this._baseScale)),this.scale*=this._baseScale/e,this.transX*=this._baseScale/e,this.transY*=this._baseScale/e}function setScale(e,t,i,s,n){var r,a,o,l,h,c,p,u,d,f,m=this,g=0,v=Math.abs(Math.round(60*(e-this.scale)/Math.max(e,this.scale)));e>this.params.zoomMax*this._baseScale?e=this.params.zoomMax*this._baseScale:e<this.params.zoomMin*this._baseScale&&(e=this.params.zoomMin*this._baseScale),void 0!==t&&void 0!==i&&(r=e/this.scale,s?(d=t+this._defaultWidth*(this._width/(this._defaultWidth*e))/2,f=i+this._defaultHeight*(this._height/(this._defaultHeight*e))/2):(d=this.transX-(r-1)/e*t,f=this.transY-(r-1)/e*i)),n&&v>0?(o=this.scale,l=(e-o)/v,h=this.transX*this.scale,p=this.transY*this.scale,c=(d*e-h)/v,u=(f*e-p)/v,a=setInterval((function(){g+=1,m.scale=o+l*g,m.transX=(h+c*g)/m.scale,m.transY=(p+u*g)/m.scale,m._applyTransform(),g==v&&(clearInterval(a),m._emit(Events.onViewportChange,[m.scale,m.transX,m.transY]))}),10)):(this.transX=d,this.transY=f,this.scale=e,this._applyTransform(),this._emit(Events.onViewportChange,[this.scale,this.transX,this.transY]))}function setFocus(e){var t=this;void 0===e&&(e={});var i,s=[];if(e.region?s.push(e.region):e.regions&&(s=e.regions),s.length)return s.forEach((function(e){if(t.regions[e]){var s=t.regions[e].element.shape.getBBox();s&&(i=void 0===i?s:{x:Math.min(i.x,s.x),y:Math.min(i.y,s.y),width:Math.max(i.x+i.width,s.x+s.width)-Math.min(i.x,s.x),height:Math.max(i.y+i.height,s.y+s.height)-Math.min(i.y,s.y)})}})),this._setScale(Math.min(this._width/i.width,this._height/i.height),-(i.x+i.width/2),-(i.y+i.height/2),!0,e.animate);if(e.coords){var n=this.coordsToPoint(e.coords[0],e.coords[1]),r=this.transX-n.x/this.scale,a=this.transY-n.y/this.scale;return this._setScale(e.scale*this._baseScale,r,a,!0,e.animate)}}function updateSize(){this._width=this.container.offsetWidth,this._height=this.container.offsetHeight,this._resize(),this.canvas.setSize(this._width,this._height),this._applyTransform()}var Proj={mill:function(e,t,i){return{x:this.radius*(t-i)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*e)*this.radDeg))/.8}},merc:function(e,t,i){return{x:this.radius*(t-i)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}},aea:function(e,t,i){var s=i*this.radDeg,n=29.5*this.radDeg,r=45.5*this.radDeg,a=e*this.radDeg,o=t*this.radDeg,l=(Math.sin(n)+Math.sin(r))/2,h=Math.cos(n)*Math.cos(n)+2*l*Math.sin(n),c=l*(o-s),p=Math.sqrt(h-2*l*Math.sin(a))/l,u=Math.sqrt(h-2*l*Math.sin(0))/l;return{x:p*Math.sin(c)*this.radius,y:-(u-p*Math.cos(c))*this.radius}},lcc:function(e,t,i){var s=i*this.radDeg,n=t*this.radDeg,r=33*this.radDeg,a=45*this.radDeg,o=e*this.radDeg,l=Math.log(Math.cos(r)*(1/Math.cos(a)))/Math.log(Math.tan(Math.PI/4+a/2)*(1/Math.tan(Math.PI/4+r/2))),h=Math.cos(r)*Math.pow(Math.tan(Math.PI/4+r/2),l)/l,c=h*Math.pow(1/Math.tan(Math.PI/4+o/2),l),p=h*Math.pow(1/Math.tan(Math.PI/4+0),l);return{x:c*Math.sin(l*(n-s))*this.radius,y:-(p-c*Math.cos(l*(n-s)))*this.radius}}};function coordsToPoint(e,t){var i=Map.maps[this.params.map].projection,s=Proj[i.type](e,t,i.centralMeridian),n=s.x,r=s.y,a=this.getInsetForPoint(n,r);if(!a)return!1;var o=a.bbox;return n=(n-o[0].x)/(o[1].x-o[0].x)*a.width*this.scale,r=(r-o[0].y)/(o[1].y-o[0].y)*a.height*this.scale,{x:n+this.transX*this.scale+a.left*this.scale,y:r+this.transY*this.scale+a.top*this.scale}}function getInsetForPoint(e,t){for(var i=Map.maps[this.params.map].insets,s=0;s<i.length;s++){var n=i[s].bbox,r=n[0],a=n[1];if(e>r.x&&e<a.x&&t>r.y&&t<a.y)return i[s]}}function getMarkerPosition(e){var t=e.coords;return Map.maps[this.params.map].projection?this.coordsToPoint.apply(this,t):{x:t[0]*this.scale+this.transX*this.scale,y:t[1]*this.scale+this.transY*this.scale}}function repositionLines(){var e=!1,t=!1;for(var i in this._lines){for(var s in this._markers){var n=this._markers[s];n.config.name===this._lines[i].config.from&&(e=this.getMarkerPosition(n.config)),n.config.name===this._lines[i].config.to&&(t=this.getMarkerPosition(n.config))}!1!==e&&!1!==t&&this._lines[i].setStyle({x1:e.x,y1:e.y,x2:t.x,y2:t.y})}}function repositionMarkers(){for(var e in this._markers){var t=this.getMarkerPosition(this._markers[e].config);!1!==t&&this._markers[e].element.setStyle({cx:t.x,cy:t.y})}}function repositionLabels(){var e=this.params.labels;if(e){if(e.regions)for(var t in this.regions)this.regions[t].element.updateLabelPosition();if(e.markers)for(var i in this._markers)this._markers[i].element.updateLabelPosition()}}Proj.degRad=180/Math.PI,Proj.radDeg=Math.PI/180,Proj.radius=6381372;var core={_setupContainerEvents:setupContainerEvents,_setupElementEvents:setupElementEvents,_setupZoomButtons:setupZoomButtons,_setupContainerTouchEvents:setupContainerTouchEvents,_createRegions:createRegions,_createLines:createLines,_createMarkers:createMarkers,_createSeries:createSeries,_applyTransform:applyTransform,_resize:resize,_setScale:setScale,setFocus:setFocus,updateSize:updateSize,coordsToPoint:coordsToPoint,getInsetForPoint:getInsetForPoint,getMarkerPosition:getMarkerPosition,_repositionLines:repositionLines,_repositionMarkers:repositionMarkers,_repositionLabels:repositionLabels},Defaults={map:"world",backgroundColor:"transparent",draggable:!0,zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,zoomMax:12,zoomMin:1,zoomAnimate:!0,showTooltip:!0,zoomStep:1.5,bindTouchEvents:!0,lineStyle:{stroke:"#808080",strokeWidth:1,strokeLinecap:"round"},markersSelectable:!1,markersSelectableOne:!1,markerStyle:{initial:{r:7,fill:"#374151",fillOpacity:1,stroke:"#FFF",strokeWidth:5,strokeOpacity:.5},hover:{fill:"#3cc0ff",cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{fontFamily:"Verdana",fontSize:12,fontWeight:500,cursor:"default",fill:"#374151"},hover:{cursor:"pointer"},selected:{},selectedHover:{}},regionsSelectable:!1,regionsSelectableOne:!1,regionStyle:{initial:{fill:"#dee2e8",fillOpacity:1,stroke:"none",strokeWidth:0},hover:{fillOpacity:.7,cursor:"pointer"},selected:{fill:"#9ca3af"},selectedHover:{}},regionLabelStyle:{initial:{fontFamily:"Verdana",fontSize:"12",fontWeight:"bold",cursor:"default",fill:"#35373e"},hover:{cursor:"pointer"}}},SVGElement=function(){function e(e,t){this.node=this._createElement(e),t&&this.set(t)}var t=e.prototype;return t._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},t.addClass=function(e){this.node.setAttribute("class",e)},t.getBBox=function(){return this.node.getBBox()},t.set=function(e,t){if("object"==typeof e)for(var i in e)this.applyAttr(i,e[i]);else this.applyAttr(e,t)},t.get=function(e){return this.style.initial[e]},t.applyAttr=function(e,t){this.node.setAttribute(hyphenate(e),t)},t.remove=function(){removeElement(this.node)},e}(),SVGShapeElement=function(e){function t(t,i,s){var n;return void 0===s&&(s={}),(n=e.call(this,t,i)||this).isHovered=!1,n.isSelected=!1,n.style=s,n.style.current={},n.updateStyle(),n}_inheritsLoose(t,e);var i=t.prototype;return i.setStyle=function(e,t){var i;merge(this.style.current,"object"==typeof e?e:((i={})[e]=t,i)),this.updateStyle()},i.updateStyle=function(){var e={};merge(e,this.style.initial),merge(e,this.style.current),this.isHovered&&merge(e,this.style.hover),this.isSelected&&(merge(e,this.style.selected),this.isHovered&&merge(e,this.style.selectedHover)),this.set(e)},t}(SVGElement),SVGTextElement=function(e){function t(t,i){return e.call(this,"text",t,i)||this}return _inheritsLoose(t,e),t.prototype.applyAttr=function(t,i){"text"===t?this.node.textContent=i:e.prototype.applyAttr.call(this,t,i)},t}(SVGShapeElement),SVGImageElement=function(e){function t(t,i){return e.call(this,"image",t,i)||this}return _inheritsLoose(t,e),t.prototype.applyAttr=function(t,i){var s;"image"===t?("object"==typeof i?(s=i.url,this.offset=i.offset||[0,0]):(s=i,this.offset=[0,0]),this.node.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.width=23,this.height=23,this.applyAttr("width",this.width),this.applyAttr("height",this.height),this.applyAttr("x",this.cx-this.width/2+this.offset[0]),this.applyAttr("y",this.cy-this.height/2+this.offset[1])):"cx"==t?(this.cx=i,this.width&&this.applyAttr("x",i-this.width/2+this.offset[0])):"cy"==t?(this.cy=i,this.height&&this.applyAttr("y",i-this.height/2+this.offset[1])):e.prototype.applyAttr.apply(this,arguments)},t}(SVGShapeElement),SVGCanvasElement=function(e){function t(t){var i;return(i=e.call(this,"svg")||this)._container=t,i._defsElement=new SVGElement("defs"),i._rootElement=new SVGElement("g",{id:"jvm-regions-group"}),i.node.appendChild(i._defsElement.node),i.node.appendChild(i._rootElement.node),i._container.appendChild(i.node),i}_inheritsLoose(t,e);var i=t.prototype;return i.setSize=function(e,t){this.node.setAttribute("width",e),this.node.setAttribute("height",t)},i.applyTransformParams=function(e,t,i){this._rootElement.node.setAttribute("transform","scale("+e+") translate("+t+", "+i+")")},i.createPath=function(e,t){var i=new SVGShapeElement("path",e,t);return i.node.setAttribute("fill-rule","evenodd"),this._add(i)},i.createCircle=function(e,t,i){var s=new SVGShapeElement("circle",e,t);return this._add(s,i)},i.createLine=function(e,t,i){var s=new SVGShapeElement("line",e,t);return this._add(s,i)},i.createText=function(e,t,i){var s=new SVGTextElement(e,t);return this._add(s,i)},i.createImage=function(e,t,i){var s=new SVGImageElement(e,t);return this._add(s,i)},i.createGroup=function(e){var t=new SVGElement("g");return this.node.appendChild(t.node),e&&(t.node.id=e),t.canvas=this,t},i._add=function(e,t){return(t=t||this._rootElement).node.appendChild(e.node),e},t}(SVGElement),Tooltip=function(e){function t(t){var i;i=e.call(this)||this;var s=createElement("div","jvm-tooltip");return i._map=t,i._tooltip=document.body.appendChild(s),i._bindEventListeners(),i||_assertThisInitialized(i)}_inheritsLoose(t,e);var i=t.prototype;return i._bindEventListeners=function(){var e=this;EventHandler.on(this._map.container,"mousemove",(function(t){if(e._tooltip.classList.contains("active")){var i=findElement(e._map.container,"#jvm-regions-group").getBoundingClientRect(),s=e._tooltip.getBoundingClientRect(),n=s.height,r=s.width,a=t.clientY<=i.top+n+5,o=t.pageY-n-5,l=t.pageX-r-5;a&&(o+=n+5,l-=10),t.clientX<i.left+r+5&&(l=t.pageX+5+2,a&&(l+=10)),e.css({top:o+"px",left:l+"px"})}}))},i.getElement=function(){return this._tooltip},i.show=function(){this._tooltip.classList.add("active")},i.hide=function(){this._tooltip.classList.remove("active")},i.text=function(e,t){void 0===t&&(t=!1);var i=t?"innerHTML":"textContent";if(!e)return this._tooltip[i];this._tooltip[i]=e},i.css=function(e){for(var t in e)this._tooltip.style[t]=e[t];return this},t}(BaseComponent),DataVisualization=function(){function e(e,t){var i=e.scale,s=e.values;this._scale=i,this._values=s,this._fromColor=this.hexToRgb(i[0]),this._toColor=this.hexToRgb(i[1]),this._map=t,this.setMinMaxValues(s),this.visualize()}var t=e.prototype;return t.setMinMaxValues=function(e){for(var t in this.min=Number.MAX_VALUE,this.max=0,e)(t=parseFloat(e[t]))>this.max&&(this.max=t),t<this.min&&(this.min=t)},t.visualize=function(){var e,t={};for(var i in this._values)e=parseFloat(this._values[i]),isNaN(e)||(t[i]=this.getValue(e));this.setAttributes(t)},t.setAttributes=function(e){for(var t in e)this._map.regions[t]&&this._map.regions[t].element.setStyle("fill",e[t])},t.getValue=function(e){if(this.min===this.max)return"#"+this._toColor.join("");for(var t,i="#",s=0;s<3;s++)i+=(1===(t=Math.round(this._fromColor[s]+(this._toColor[s]-this._fromColor[s])*((e-this.min)/(this.max-this.min))).toString(16)).length?"0":"")+t;return i},t.hexToRgb=function(e){var t=0,i=0,s=0;return 4==e.length?(t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],s="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],s="0x"+e[5]+e[6]),[parseInt(t),parseInt(i),parseInt(s)]},e}(),Map=function(){function e(t){var i=this;if(void 0===t&&(t={}),this.params=merge(e.defaults,t,!0),!e.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+t.map);this.regions={},this.scale=1,this.transX=0,this.transY=0,this._mapData=e.maps[this.params.map],this._markers={},this._lines={},this._defaultWidth=this._mapData.width,this._defaultHeight=this._mapData.height,this._height=0,this._width=0,this._baseScale=1,this._baseTransX=0,this._baseTransY=0,"loading"!==document.readyState?this._init():window.addEventListener("DOMContentLoaded",(function(){return i._init()}))}var t=e.prototype;return t._init=function(){var e=this.params;this.container=getElement(e.selector),this.container.classList.add("jvm-container"),this.canvas=new SVGCanvasElement(this.container),this.setBackgroundColor(e.backgroundColor),this._createRegions(),this.updateSize(),this._createLines(e.lines||{},e.markers||{}),this._createMarkers(e.markers),this._repositionLabels(),this._setupContainerEvents(),this._setupElementEvents(),e.zoomButtons&&this._setupZoomButtons(),e.showTooltip&&(this._tooltip=new Tooltip(this)),e.selectedRegions&&this._setSelected("regions",e.selectedRegions),e.selectedMarkers&&this._setSelected("_markers",e.selectedMarkers),e.focusOn&&this.setFocus(e.focusOn),e.visualizeData&&(this.dataVisualization=new DataVisualization(e.visualizeData,this)),e.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&this._setupContainerTouchEvents(),e.series&&(this.container.appendChild(this.legendHorizontal=createElement("div","jvm-series-container jvm-series-h")),this.container.appendChild(this.legendVertical=createElement("div","jvm-series-container jvm-series-v")),this._createSeries()),this._emit(Events.onLoaded,[this])},t.setBackgroundColor=function(e){this.container.style.backgroundColor=e},t.getSelectedRegions=function(){return this._getSelected("regions")},t.clearSelectedRegions=function(e){var t=this;void 0===e&&(e=void 0),(e=this._normalizeRegions(e)||this._getSelected("regions")).forEach((function(e){t.regions[e].element.select(!1)}))},t.setSelectedRegions=function(e){this.clearSelectedRegions(),this._setSelected("regions",this._normalizeRegions(e))},t.getSelectedMarkers=function(){return this._getSelected("_markers")},t.clearSelectedMarkers=function(){this._clearSelected("_markers")},t.addMarkers=function(e){e=Array.isArray(e)?e:[e],this._createMarkers(e,!0)},t.removeMarkers=function(e){var t=this;e||(e=Object.keys(this._markers)),e.forEach((function(e){t._markers[e].element.remove(),delete t._markers[e]}))},t.addLine=function(e,t,i){void 0===i&&(i={}),console.warn("`addLine` method is deprecated, please use `addLines` instead."),this._createLines([{from:e,to:t,style:i}],this._markers,!0)},t.addLines=function(e){var t=this._getLinesAsUids();Array.isArray(e)||(e=[e]),this._createLines(e.filter((function(e){return!(t.indexOf(getLineUid(e.from,e.to))>-1)})),this._markers,!0)},t.removeLines=function(e){var t=this;(e=Array.isArray(e)?e.map((function(e){return getLineUid(e.from,e.to)})):this._getLinesAsUids()).forEach((function(e){t._lines[e].dispose(),delete t._lines[e]}))},t.removeLine=function(e,t){console.warn("`removeLine` method is deprecated, please use `removeLines` instead.");var i=getLineUid(e,t);this._lines.hasOwnProperty(i)&&(this._lines[i].element.remove(),delete this._lines[i])},t.reset=function(){for(var e in this.series)for(var t=0;t<this.series[e].length;t++)this.series[e][t].clear();this.legendHorizontal&&(removeElement(this.legendHorizontal),this.legendHorizontal=null),this.legendVertical&&(removeElement(this.legendVertical),this.legendVertical=null),this.scale=this._baseScale,this.transX=this._baseTransX,this.transY=this._baseTransY,this._applyTransform(),this.clearSelectedMarkers(),this.clearSelectedRegions(),this.removeMarkers()},t.destroy=function(e){var t=this;void 0===e&&(e=!0),EventHandler.flush(),this._tooltip.dispose(),this._emit(Events.onDestroyed),e&&Object.keys(this).forEach((function(e){try{delete t[e]}catch(e){}}))},t.extend=function(t,i){if("function"==typeof this[t])throw new Error("The method ["+t+"] does already exist, please use another name.");e.prototype[t]=i},t._emit=function(e,t){for(var i in Events)Events[i]===e&&"function"==typeof this.params[i]&&this.params[i].apply(this,t)},t._getSelected=function(e){var t=[];for(var i in this[e])this[e][i].element.isSelected&&t.push(i);return t},t._setSelected=function(e,t){var i=this;t.forEach((function(t){i[e][t]&&i[e][t].element.select(!0)}))},t._clearSelected=function(e){var t=this;this._getSelected(e).forEach((function(i){t[e][i].element.select(!1)}))},t._getLinesAsUids=function(){return Object.keys(this._lines)},t._normalizeRegions=function(e){return"string"==typeof e?[e]:e},e}();Map.maps={},Map.defaults=Defaults,Object.assign(Map.prototype,core);var jsVectorMap=function(){function e(e){if(void 0===e&&(e={}),!e.selector)throw new Error("Selector is not given.");return new Map(e)}return e.addMap=function(e,t){Map.maps[e]=t},e}(),index=window.jsVectorMap=jsVectorMap;export{index as default};