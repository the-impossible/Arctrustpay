import{g as e,a as t}from"../shared/ssr-window.esm.min.mjs";import{a,b as n}from"../shared/utils.min.mjs";function r(r){let{swiper:l,extendParams:i,on:o,emit:s}=r;const d=e(),f=t();function m(e){if(!l.enabled)return;const{rtlTranslate:t}=l;let r=e;r.originalEvent&&(r=r.originalEvent);const i=r.keyCode||r.charCode,o=l.params.keyboard.pageUpDown,m=o&&33===i,p=o&&34===i,b=37===i,c=39===i,y=38===i,u=40===i;if(!l.allowSlideNext&&(l.isHorizontal()&&c||l.isVertical()&&u||p))return!1;if(!l.allowSlidePrev&&(l.isHorizontal()&&b||l.isVertical()&&y||m))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey||d.activeElement&&d.activeElement.nodeName&&("input"===d.activeElement.nodeName.toLowerCase()||"textarea"===d.activeElement.nodeName.toLowerCase()))){if(l.params.keyboard.onlyInViewport&&(m||p||b||c||y||u)){let e=!1;if(a(l.el,`.${l.params.slideClass}, swiper-slide`).length>0&&0===a(l.el,`.${l.params.slideActiveClass}`).length)return;const r=l.el,i=r.clientWidth,o=r.clientHeight,s=f.innerWidth,d=f.innerHeight,m=n(r);t&&(m.left-=r.scrollLeft);const p=[[m.left,m.top],[m.left+i,m.top],[m.left,m.top+o],[m.left+i,m.top+o]];for(let t=0;t<p.length;t+=1){const a=p[t];if(a[0]>=0&&a[0]<=s&&a[1]>=0&&a[1]<=d){if(0===a[0]&&0===a[1])continue;e=!0}}if(!e)return}l.isHorizontal()?((m||p||b||c)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),((p||c)&&!t||(m||b)&&t)&&l.slideNext(),((m||b)&&!t||(p||c)&&t)&&l.slidePrev()):((m||p||y||u)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),(p||u)&&l.slideNext(),(m||y)&&l.slidePrev()),s("keyPress",i)}}function p(){l.keyboard.enabled||(d.addEventListener("keydown",m),l.keyboard.enabled=!0)}function b(){l.keyboard.enabled&&(d.removeEventListener("keydown",m),l.keyboard.enabled=!1)}l.keyboard={enabled:!1},i({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),o("init",(()=>{l.params.keyboard.enabled&&p()})),o("destroy",(()=>{l.keyboard.enabled&&b()})),Object.assign(l.keyboard,{enable:p,disable:b})}export{r as default};