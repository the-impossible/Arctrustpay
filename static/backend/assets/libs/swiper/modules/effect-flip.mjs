import{c as e}from"../shared/create-shadow.mjs";import{e as t}from"../shared/effect-init.mjs";import{e as s}from"../shared/effect-target.mjs";import{e as r}from"../shared/effect-virtual-transition-end.mjs";import{g as a,o}from"../shared/utils.mjs";function i(i){let{swiper:l,extendParams:p,on:f}=i;p({flipEffect:{slideShadows:!0,limitRotation:!0}});const n=(t,s)=>{let r=l.isHorizontal()?t.querySelector(".swiper-slide-shadow-left"):t.querySelector(".swiper-slide-shadow-top"),a=l.isHorizontal()?t.querySelector(".swiper-slide-shadow-right"):t.querySelector(".swiper-slide-shadow-bottom");r||(r=e("flip",t,l.isHorizontal()?"left":"top")),a||(a=e("flip",t,l.isHorizontal()?"right":"bottom")),r&&(r.style.opacity=Math.max(-s,0)),a&&(a.style.opacity=Math.max(s,0))};t({effect:"flip",swiper:l,on:f,setTranslate:()=>{const{slides:e,rtlTranslate:t}=l,r=l.params.flipEffect,a=o(l);for(let o=0;o<e.length;o+=1){const i=e[o];let p=i.progress;l.params.flipEffect.limitRotation&&(p=Math.max(Math.min(i.progress,1),-1));const f=i.swiperSlideOffset;let d=-180*p,m=0,c=l.params.cssMode?-f-l.translate:-f,h=0;l.isHorizontal()?t&&(d=-d):(h=c,c=0,m=-d,d=0),i.style.zIndex=-Math.abs(Math.round(p))+e.length,r.slideShadows&&n(i,p);const w=`translate3d(${c}px, ${h}px, 0px) rotateX(${a(m)}deg) rotateY(${a(d)}deg)`;s(r,i).style.transform=w}},setTransition:e=>{const t=l.slides.map((e=>a(e)));t.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),r({swiper:l,duration:e,transformElements:t})},recreateShadows:()=>{l.params.flipEffect,l.slides.forEach((e=>{let t=e.progress;l.params.flipEffect.limitRotation&&(t=Math.max(Math.min(e.progress,1),-1)),n(e,t)}))},getEffectParams:()=>l.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!l.params.cssMode})})}export{i as default};