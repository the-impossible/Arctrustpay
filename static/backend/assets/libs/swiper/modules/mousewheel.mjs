import{a as e}from"../shared/ssr-window.esm.mjs";import{n as a,d as t}from"../shared/utils.mjs";function s(s){let{swiper:n,extendParams:l,on:i,emit:r}=s;const o=e();let d;l({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),n.mousewheel={enabled:!1};let m,p=t();const u=[];function h(){n.enabled&&(n.mouseEntered=!0)}function c(){n.enabled&&(n.mouseEntered=!1)}function w(e){return!(n.params.mousewheel.thresholdDelta&&e.delta<n.params.mousewheel.thresholdDelta||n.params.mousewheel.thresholdTime&&t()-p<n.params.mousewheel.thresholdTime||!(e.delta>=6&&t()-p<60)&&(e.direction<0?n.isEnd&&!n.params.loop||n.animating||(n.slideNext(),r("scroll",e.raw)):n.isBeginning&&!n.params.loop||n.animating||(n.slidePrev(),r("scroll",e.raw)),p=(new o.Date).getTime(),1))}function f(e){let s=e,l=!0;if(!n.enabled)return;if(e.target.closest(`.${n.params.mousewheel.noMousewheelClass}`))return;const i=n.params.mousewheel;n.params.cssMode&&s.preventDefault();let o=n.el;"container"!==n.params.mousewheel.eventsTarget&&(o=document.querySelector(n.params.mousewheel.eventsTarget));const p=o&&o.contains(s.target);if(!n.mouseEntered&&!p&&!i.releaseOnEdges)return!0;s.originalEvent&&(s=s.originalEvent);let h=0;const c=n.rtlTranslate?-1:1,f=function(e){let a=0,t=0,s=0,n=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(a=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(a=t,t=0),s=10*a,n=10*t,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(s=e.deltaX),e.shiftKey&&!s&&(s=n,n=0),(s||n)&&e.deltaMode&&(1===e.deltaMode?(s*=40,n*=40):(s*=800,n*=800)),s&&!a&&(a=s<1?-1:1),n&&!t&&(t=n<1?-1:1),{spinX:a,spinY:t,pixelX:s,pixelY:n}}(s);if(i.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(f.pixelX)>Math.abs(f.pixelY)))return!0;h=-f.pixelX*c}else{if(!(Math.abs(f.pixelY)>Math.abs(f.pixelX)))return!0;h=-f.pixelY}else h=Math.abs(f.pixelX)>Math.abs(f.pixelY)?-f.pixelX*c:-f.pixelY;if(0===h)return!0;i.invert&&(h=-h);let g=n.getTranslate()+h*i.sensitivity;if(g>=n.minTranslate()&&(g=n.minTranslate()),g<=n.maxTranslate()&&(g=n.maxTranslate()),l=!!n.params.loop||!(g===n.minTranslate()||g===n.maxTranslate()),l&&n.params.nested&&s.stopPropagation(),n.params.freeMode&&n.params.freeMode.enabled){const e={time:t(),delta:Math.abs(h),direction:Math.sign(h)},l=m&&e.time<m.time+500&&e.delta<=m.delta&&e.direction===m.direction;if(!l){m=void 0;let t=n.getTranslate()+h*i.sensitivity;const o=n.isBeginning,p=n.isEnd;if(t>=n.minTranslate()&&(t=n.minTranslate()),t<=n.maxTranslate()&&(t=n.maxTranslate()),n.setTransition(0),n.setTranslate(t),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!o&&n.isBeginning||!p&&n.isEnd)&&n.updateSlidesClasses(),n.params.loop&&n.loopFix({direction:e.direction<0?"next":"prev",byMousewheel:!0}),n.params.freeMode.sticky){clearTimeout(d),d=void 0,u.length>=15&&u.shift();const t=u.length?u[u.length-1]:void 0,s=u[0];if(u.push(e),t&&(e.delta>t.delta||e.direction!==t.direction))u.splice(0);else if(u.length>=15&&e.time-s.time<500&&s.delta-e.delta>=1&&e.delta<=6){const t=h>0?.8:.2;m=e,u.splice(0),d=a((()=>{!n.destroyed&&n.params&&n.slideToClosest(n.params.speed,!0,void 0,t)}),0)}d||(d=a((()=>{!n.destroyed&&n.params&&(m=e,u.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5))}),500))}if(l||r("scroll",s),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),i.releaseOnEdges&&(t===n.minTranslate()||t===n.maxTranslate()))return!0}}else{const a={time:t(),delta:Math.abs(h),direction:Math.sign(h),raw:e};u.length>=2&&u.shift();const s=u.length?u[u.length-1]:void 0;if(u.push(a),s?(a.direction!==s.direction||a.delta>s.delta||a.time>s.time+150)&&w(a):w(a),function(e){const a=n.params.mousewheel;if(e.direction<0){if(n.isEnd&&!n.params.loop&&a.releaseOnEdges)return!0}else if(n.isBeginning&&!n.params.loop&&a.releaseOnEdges)return!0;return!1}(a))return!0}return s.preventDefault?s.preventDefault():s.returnValue=!1,!1}function g(e){let a=n.el;"container"!==n.params.mousewheel.eventsTarget&&(a=document.querySelector(n.params.mousewheel.eventsTarget)),a[e]("mouseenter",h),a[e]("mouseleave",c),a[e]("wheel",f)}function v(){return n.params.cssMode?(n.wrapperEl.removeEventListener("wheel",f),!0):!n.mousewheel.enabled&&(g("addEventListener"),n.mousewheel.enabled=!0,!0)}function T(){return n.params.cssMode?(n.wrapperEl.addEventListener(event,f),!0):!!n.mousewheel.enabled&&(g("removeEventListener"),n.mousewheel.enabled=!1,!0)}i("init",(()=>{!n.params.mousewheel.enabled&&n.params.cssMode&&T(),n.params.mousewheel.enabled&&v()})),i("destroy",(()=>{n.params.cssMode&&v(),n.mousewheel.enabled&&T()})),Object.assign(n.mousewheel,{enable:v,disable:T})}export{s as default};