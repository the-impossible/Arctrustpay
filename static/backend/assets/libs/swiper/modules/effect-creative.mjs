import{c as e}from"../shared/create-shadow.mjs";import{e as s}from"../shared/effect-init.mjs";import{e as t}from"../shared/effect-target.mjs";import{e as r}from"../shared/effect-virtual-transition-end.mjs";import{g as a,o as i}from"../shared/utils.mjs";function o(o){let{swiper:l,extendParams:n,on:c}=o;n({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const p=e=>"string"==typeof e?e:`${e}px`;s({effect:"creative",swiper:l,on:c,setTranslate:()=>{const{slides:s,wrapperEl:r,slidesSizesGrid:a}=l,o=l.params.creativeEffect,{progressMultiplier:n}=o,c=l.params.centeredSlides,m=i(l);if(c){const e=a[0]/2-l.params.slidesOffsetBefore||0;r.style.transform=`translateX(calc(50% - ${e}px))`}for(let r=0;r<s.length;r+=1){const a=s[r],i=a.progress,f=Math.min(Math.max(a.progress,-o.limitProgress),o.limitProgress);let d=f;c||(d=Math.min(Math.max(a.originalProgress,-o.limitProgress),o.limitProgress));const h=a.swiperSlideOffset,g=[l.params.cssMode?-h-l.translate:-h,0,0],y=[0,0,0];let w=!1;l.isHorizontal()||(g[1]=g[0],g[0]=0);let M={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};f<0?(M=o.next,w=!0):f>0&&(M=o.prev,w=!0),g.forEach(((e,s)=>{g[s]=`calc(${e}px + (${p(M.translate[s])} * ${Math.abs(f*n)}))`})),y.forEach(((e,s)=>{let t=M.rotate[s]*Math.abs(f*n);y[s]=t})),a.style.zIndex=-Math.abs(Math.round(i))+s.length;const $=g.join(", "),P=`rotateX(${m(y[0])}deg) rotateY(${m(y[1])}deg) rotateZ(${m(y[2])}deg)`,u=d<0?`scale(${1+(1-M.scale)*d*n})`:`scale(${1-(1-M.scale)*d*n})`,v=d<0?1+(1-M.opacity)*d*n:1-(1-M.opacity)*d*n,x=`translate3d(${$}) ${P} ${u}`;if(w&&M.shadow||!w){let s=a.querySelector(".swiper-slide-shadow");if(!s&&M.shadow&&(s=e("creative",a)),s){const e=o.shadowPerProgress?f*(1/o.limitProgress):f;s.style.opacity=Math.min(Math.max(Math.abs(e),0),1)}}const E=t(o,a);E.style.transform=x,E.style.opacity=v,M.origin&&(E.style.transformOrigin=M.origin)}},setTransition:e=>{const s=l.slides.map((e=>a(e)));s.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),r({swiper:l,duration:e,transformElements:s,allSlides:!0})},perspective:()=>l.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!l.params.cssMode})})}export{o as default};