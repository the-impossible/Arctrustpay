import{g as e,a as t}from"../shared/ssr-window.esm.mjs";import{a,b as n}from"../shared/utils.mjs";function r(r){let{swiper:l,extendParams:i,on:o,emit:s}=r;const d=e(),f=t();function p(e){if(!l.enabled)return;const{rtlTranslate:t}=l;let r=e;r.originalEvent&&(r=r.originalEvent);const i=r.keyCode||r.charCode,o=l.params.keyboard.pageUpDown,p=o&&33===i,b=o&&34===i,c=37===i,m=39===i,y=38===i,u=40===i;if(!l.allowSlideNext&&(l.isHorizontal()&&m||l.isVertical()&&u||b))return!1;if(!l.allowSlidePrev&&(l.isHorizontal()&&c||l.isVertical()&&y||p))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey||d.activeElement&&d.activeElement.nodeName&&("input"===d.activeElement.nodeName.toLowerCase()||"textarea"===d.activeElement.nodeName.toLowerCase()))){if(l.params.keyboard.onlyInViewport&&(p||b||c||m||y||u)){let e=!1;if(a(l.el,`.${l.params.slideClass}, swiper-slide`).length>0&&0===a(l.el,`.${l.params.slideActiveClass}`).length)return;const r=l.el,i=r.clientWidth,o=r.clientHeight,s=f.innerWidth,d=f.innerHeight,p=n(r);t&&(p.left-=r.scrollLeft);const b=[[p.left,p.top],[p.left+i,p.top],[p.left,p.top+o],[p.left+i,p.top+o]];for(let t=0;t<b.length;t+=1){const a=b[t];if(a[0]>=0&&a[0]<=s&&a[1]>=0&&a[1]<=d){if(0===a[0]&&0===a[1])continue;e=!0}}if(!e)return}l.isHorizontal()?((p||b||c||m)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),((b||m)&&!t||(p||c)&&t)&&l.slideNext(),((p||c)&&!t||(b||m)&&t)&&l.slidePrev()):((p||b||y||u)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),(b||u)&&l.slideNext(),(p||y)&&l.slidePrev()),s("keyPress",i)}}function b(){l.keyboard.enabled||(d.addEventListener("keydown",p),l.keyboard.enabled=!0)}function c(){l.keyboard.enabled&&(d.removeEventListener("keydown",p),l.keyboard.enabled=!1)}l.keyboard={enabled:!1},i({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),o("init",(()=>{l.params.keyboard.enabled&&b()})),o("destroy",(()=>{l.keyboard.enabled&&c()})),Object.assign(l.keyboard,{enable:b,disable:c})}export{r as default};