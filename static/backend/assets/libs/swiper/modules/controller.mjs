import{n as t,k as r}from"../shared/utils.mjs";function e(e){let{swiper:n,extendParams:o,on:l}=e;function s(t,r){const e=function(){let t,r,e;return(n,o)=>{for(r=-1,t=n.length;t-r>1;)e=t+r>>1,n[e]<=o?r=e:t=e;return t}}();let n,o;return this.x=t,this.y=r,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(o=e(this.x,t),n=o-1,(t-this.x[n])*(this.y[o]-this.y[n])/(this.x[o]-this.x[n])+this.y[n]):0},this}function a(){n.controller.control&&n.controller.spline&&(n.controller.spline=void 0,delete n.controller.spline)}o({controller:{control:void 0,inverse:!1,by:"slide"}}),n.controller={control:void 0},l("beforeInit",(()=>{"undefined"!=typeof window&&("string"==typeof n.params.controller.control||n.params.controller.control instanceof HTMLElement)?("string"==typeof n.params.controller.control?[...document.querySelectorAll(n.params.controller.control)]:[n.params.controller.control]).forEach((t=>{if(n.controller.control||(n.controller.control=[]),t&&t.swiper)n.controller.control.push(t.swiper);else if(t){const r=`${n.params.eventsPrefix}init`,e=o=>{n.controller.control.push(o.detail[0]),n.update(),t.removeEventListener(r,e)};t.addEventListener(r,e)}})):n.controller.control=n.params.controller.control})),l("update",(()=>{a()})),l("resize",(()=>{a()})),l("observerUpdate",(()=>{a()})),l("setTranslate",((t,r,e)=>{n.controller.control&&!n.controller.control.destroyed&&n.controller.setTranslate(r,e)})),l("setTransition",((t,r,e)=>{n.controller.control&&!n.controller.control.destroyed&&n.controller.setTransition(r,e)})),Object.assign(n.controller,{setTranslate:function(t,r){const e=n.controller.control;let o,l;const a=n.constructor;function i(t){if(t.destroyed)return;const r=n.rtlTranslate?-n.translate:n.translate;"slide"===n.params.controller.by&&(function(t){n.controller.spline=n.params.loop?new s(n.slidesGrid,t.slidesGrid):new s(n.snapGrid,t.snapGrid)}(t),l=-n.controller.spline.interpolate(-r)),l&&"container"!==n.params.controller.by||(o=(t.maxTranslate()-t.minTranslate())/(n.maxTranslate()-n.minTranslate()),!Number.isNaN(o)&&Number.isFinite(o)||(o=1),l=(r-n.minTranslate())*o+t.minTranslate()),n.params.controller.inverse&&(l=t.maxTranslate()-l),t.updateProgress(l),t.setTranslate(l,n),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(e))for(let t=0;t<e.length;t+=1)e[t]!==r&&e[t]instanceof a&&i(e[t]);else e instanceof a&&r!==e&&i(e)},setTransition:function(e,o){const l=n.constructor,s=n.controller.control;let a;function i(o){o.destroyed||(o.setTransition(e,n),0!==e&&(o.transitionStart(),o.params.autoHeight&&t((()=>{o.updateAutoHeight()})),r(o.wrapperEl,(()=>{s&&o.transitionEnd()}))))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==o&&s[a]instanceof l&&i(s[a]);else s instanceof l&&o!==s&&i(s)}})}export{e as default};