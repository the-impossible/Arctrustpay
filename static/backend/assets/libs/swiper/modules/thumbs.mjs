import{g as e}from"../shared/ssr-window.esm.mjs";import{l as s,e as i}from"../shared/utils.mjs";function t(t){let{swiper:r,extendParams:a,on:l}=t;a({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let n=!1,d=!1;function o(){const e=r.thumbs.swiper;if(!e||e.destroyed)return;const s=e.clickedIndex,i=e.clickedSlide;if(i&&i.classList.contains(r.params.thumbs.slideThumbActiveClass))return;if(null==s)return;let t;t=e.params.loop?parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10):s,r.params.loop?r.slideToLoop(t):r.slideTo(t)}function p(){const{thumbs:e}=r.params;if(n)return!1;n=!0;const i=r.constructor;if(e.swiper instanceof i)r.thumbs.swiper=e.swiper,Object.assign(r.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(r.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),r.thumbs.swiper.update();else if(s(e.swiper)){const s=Object.assign({},e.swiper);Object.assign(s,{watchSlidesProgress:!0,slideToClickedSlide:!1}),r.thumbs.swiper=new i(s),d=!0}return r.thumbs.swiper.el.classList.add(r.params.thumbs.thumbsContainerClass),r.thumbs.swiper.on("tap",o),!0}function m(e){const s=r.thumbs.swiper;if(!s||s.destroyed)return;const t="auto"===s.params.slidesPerView?s.slidesPerViewDynamic():s.params.slidesPerView;let a=1;const l=r.params.thumbs.slideThumbActiveClass;if(r.params.slidesPerView>1&&!r.params.centeredSlides&&(a=r.params.slidesPerView),r.params.thumbs.multipleActiveThumbs||(a=1),a=Math.floor(a),s.slides.forEach((e=>e.classList.remove(l))),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let e=0;e<a;e+=1)i(s.slidesEl,`[data-swiper-slide-index="${r.realIndex+e}"]`).forEach((e=>{e.classList.add(l)}));else for(let e=0;e<a;e+=1)s.slides[r.realIndex+e]&&s.slides[r.realIndex+e].classList.add(l);const n=r.params.thumbs.autoScrollOffset,d=n&&!s.params.loop;if(r.realIndex!==s.realIndex||d){const i=s.activeIndex;let a,l;if(s.params.loop){const e=s.slides.filter((e=>e.getAttribute("data-swiper-slide-index")===`${r.realIndex}`))[0];a=s.slides.indexOf(e),l=r.activeIndex>r.previousIndex?"next":"prev"}else a=r.realIndex,l=a>r.previousIndex?"next":"prev";d&&(a+="next"===l?n:-1*n),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(a)<0&&(s.params.centeredSlides?a=a>i?a-Math.floor(t/2)+1:a+Math.floor(t/2)-1:a>i&&s.params.slidesPerGroup,s.slideTo(a,e?0:void 0))}}r.thumbs={swiper:null},l("beforeInit",(()=>{const{thumbs:s}=r.params;if(s&&s.swiper)if("string"==typeof s.swiper||s.swiper instanceof HTMLElement){const i=e(),t=()=>{const e="string"==typeof s.swiper?i.querySelector(s.swiper):s.swiper;if(e&&e.swiper)s.swiper=e.swiper,p(),m(!0);else if(e){const i=`${r.params.eventsPrefix}init`,t=a=>{s.swiper=a.detail[0],e.removeEventListener(i,t),p(),m(!0),s.swiper.update(),r.update()};e.addEventListener(i,t)}return e},a=()=>{r.destroyed||t()||requestAnimationFrame(a)};requestAnimationFrame(a)}else p(),m(!0)})),l("slideChange update resize observerUpdate",(()=>{m()})),l("setTransition",((e,s)=>{const i=r.thumbs.swiper;i&&!i.destroyed&&i.setTransition(s)})),l("beforeDestroy",(()=>{const e=r.thumbs.swiper;e&&!e.destroyed&&d&&e.destroy()})),Object.assign(r.thumbs,{init:p,update:m})}export{t as default};