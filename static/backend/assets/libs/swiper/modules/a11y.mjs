import{g as e}from"../shared/ssr-window.esm.mjs";import{c as t}from"../shared/classes-to-selector.mjs";import{c as a,h as i,m as n}from"../shared/utils.mjs";function s(s){let{swiper:r,extendParams:o,on:l}=s;o({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),r.a11y={clicked:!1};let d,c,p=null,g=(new Date).getTime();function u(e){const t=p;0!==t.length&&(t.innerHTML="",t.innerHTML=e)}function m(e){(e=n(e)).forEach((e=>{e.setAttribute("tabIndex","0")}))}function f(e){(e=n(e)).forEach((e=>{e.setAttribute("tabIndex","-1")}))}function v(e,t){(e=n(e)).forEach((e=>{e.setAttribute("role",t)}))}function b(e,t){(e=n(e)).forEach((e=>{e.setAttribute("aria-roledescription",t)}))}function E(e,t){(e=n(e)).forEach((e=>{e.setAttribute("aria-label",t)}))}function h(e){(e=n(e)).forEach((e=>{e.setAttribute("aria-disabled",!0)}))}function y(e){(e=n(e)).forEach((e=>{e.setAttribute("aria-disabled",!1)}))}function M(e){if(13!==e.keyCode&&32!==e.keyCode)return;const a=r.params.a11y,i=e.target;if(!r.pagination||!r.pagination.el||i!==r.pagination.el&&!r.pagination.el.contains(e.target)||e.target.matches(t(r.params.pagination.bulletClass))){if(r.navigation&&r.navigation.prevEl&&r.navigation.nextEl){const e=n(r.navigation.prevEl);n(r.navigation.nextEl).includes(i)&&(r.isEnd&&!r.params.loop||r.slideNext(),r.isEnd?u(a.lastSlideMessage):u(a.nextSlideMessage)),e.includes(i)&&(r.isBeginning&&!r.params.loop||r.slidePrev(),r.isBeginning?u(a.firstSlideMessage):u(a.prevSlideMessage))}r.pagination&&i.matches(t(r.params.pagination.bulletClass))&&i.click()}}function L(){return r.pagination&&r.pagination.bullets&&r.pagination.bullets.length}function x(){return L()&&r.params.pagination.clickable}const w=(e,t,a)=>{m(e),"BUTTON"!==e.tagName&&(v(e,"button"),e.addEventListener("keydown",M)),E(e,a),function(e,t){(e=n(e)).forEach((e=>{e.setAttribute("aria-controls",t)}))}(e,t)},A=e=>{c&&c!==e.target&&!c.contains(e.target)&&(d=!0),r.a11y.clicked=!0},k=()=>{d=!1,requestAnimationFrame((()=>{requestAnimationFrame((()=>{r.destroyed||(r.a11y.clicked=!1)}))}))},S=e=>{g=(new Date).getTime()},C=e=>{if(r.a11y.clicked||!r.params.a11y.scrollOnFocus)return;if((new Date).getTime()-g<100)return;const t=e.target.closest(`.${r.params.slideClass}, swiper-slide`);if(!t||!r.slides.includes(t))return;c=t;const a=r.slides.indexOf(t)===r.activeIndex,i=r.params.watchSlidesProgress&&r.visibleSlides&&r.visibleSlides.includes(t);a||i||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(r.isHorizontal()?r.el.scrollLeft=0:r.el.scrollTop=0,requestAnimationFrame((()=>{d||(r.params.loop?r.slideToLoop(parseInt(t.getAttribute("data-swiper-slide-index")),0):r.slideTo(r.slides.indexOf(t),0),d=!1)})))},T=()=>{const e=r.params.a11y;e.itemRoleDescriptionMessage&&b(r.slides,e.itemRoleDescriptionMessage),e.slideRole&&v(r.slides,e.slideRole);const t=r.slides.length;e.slideLabelMessage&&r.slides.forEach(((a,i)=>{const n=r.params.loop?parseInt(a.getAttribute("data-swiper-slide-index"),10):i;E(a,e.slideLabelMessage.replace(/\{\{index\}\}/,n+1).replace(/\{\{slidesLength\}\}/,t))}))};l("beforeInit",(()=>{p=a("span",r.params.a11y.notificationClass),p.setAttribute("aria-live","assertive"),p.setAttribute("aria-atomic","true")})),l("afterInit",(()=>{r.params.a11y.enabled&&(()=>{const t=r.params.a11y;r.el.append(p);const a=r.el;t.containerRoleDescriptionMessage&&b(a,t.containerRoleDescriptionMessage),t.containerMessage&&E(a,t.containerMessage),t.containerRole&&v(a,t.containerRole);const i=r.wrapperEl,s=t.id||i.getAttribute("id")||`swiper-wrapper-${o=16,void 0===o&&(o=16),"x".repeat(o).replace(/x/g,(()=>Math.round(16*Math.random()).toString(16)))}`;var o;const l=r.params.autoplay&&r.params.autoplay.enabled?"off":"polite";var d;d=s,n(i).forEach((e=>{e.setAttribute("id",d)})),function(e,t){(e=n(e)).forEach((e=>{e.setAttribute("aria-live",t)}))}(i,l),T();let{nextEl:c,prevEl:g}=r.navigation?r.navigation:{};c=n(c),g=n(g),c&&c.forEach((e=>w(e,s,t.nextSlideMessage))),g&&g.forEach((e=>w(e,s,t.prevSlideMessage))),x()&&n(r.pagination.el).forEach((e=>{e.addEventListener("keydown",M)})),e().addEventListener("visibilitychange",S),r.el.addEventListener("focus",C,!0),r.el.addEventListener("focus",C,!0),r.el.addEventListener("pointerdown",A,!0),r.el.addEventListener("pointerup",k,!0)})()})),l("slidesLengthChange snapGridLengthChange slidesGridLengthChange",(()=>{r.params.a11y.enabled&&T()})),l("fromEdge toEdge afterInit lock unlock",(()=>{r.params.a11y.enabled&&function(){if(r.params.loop||r.params.rewind||!r.navigation)return;const{nextEl:e,prevEl:t}=r.navigation;t&&(r.isBeginning?(h(t),f(t)):(y(t),m(t))),e&&(r.isEnd?(h(e),f(e)):(y(e),m(e)))}()})),l("paginationUpdate",(()=>{r.params.a11y.enabled&&function(){const e=r.params.a11y;L()&&r.pagination.bullets.forEach((a=>{r.params.pagination.clickable&&(m(a),r.params.pagination.renderBullet||(v(a,"button"),E(a,e.paginationBulletMessage.replace(/\{\{index\}\}/,i(a)+1)))),a.matches(t(r.params.pagination.bulletActiveClass))?a.setAttribute("aria-current","true"):a.removeAttribute("aria-current")}))}()})),l("destroy",(()=>{r.params.a11y.enabled&&function(){p&&p.remove();let{nextEl:t,prevEl:a}=r.navigation?r.navigation:{};t=n(t),a=n(a),t&&t.forEach((e=>e.removeEventListener("keydown",M))),a&&a.forEach((e=>e.removeEventListener("keydown",M))),x()&&n(r.pagination.el).forEach((e=>{e.removeEventListener("keydown",M)})),e().removeEventListener("visibilitychange",S),r.el&&"string"!=typeof r.el&&(r.el.removeEventListener("focus",C,!0),r.el.removeEventListener("pointerdown",A,!0),r.el.removeEventListener("pointerup",k,!0))}()}))}export{s as default};