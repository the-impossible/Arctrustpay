import{g as a,a as e}from"../shared/ssr-window.esm.min.mjs";import{e as t}from"../shared/utils.min.mjs";function s(s){let{swiper:i,extendParams:r,emit:n,on:h}=s,d=!1;const l=a(),o=e();r({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(a,e){if(i.virtual&&i.params.virtual.enabled){const a=i.slides.filter((a=>a.getAttribute("data-hash")===e))[0];return a?parseInt(a.getAttribute("data-swiper-slide-index"),10):0}return i.getSlideIndex(t(i.slidesEl,`.${i.params.slideClass}[data-hash="${e}"], swiper-slide[data-hash="${e}"]`)[0])}}});const m=()=>{n("hashChange");const a=l.location.hash.replace("#",""),e=i.virtual&&i.params.virtual.enabled?i.slidesEl.querySelector(`[data-swiper-slide-index="${i.activeIndex}"]`):i.slides[i.activeIndex];if(a!==(e?e.getAttribute("data-hash"):"")){const e=i.params.hashNavigation.getSlideIndex(i,a);if(void 0===e||Number.isNaN(e))return;i.slideTo(e)}},p=()=>{if(!d||!i.params.hashNavigation.enabled)return;const a=i.virtual&&i.params.virtual.enabled?i.slidesEl.querySelector(`[data-swiper-slide-index="${i.activeIndex}"]`):i.slides[i.activeIndex],e=a?a.getAttribute("data-hash")||a.getAttribute("data-history"):"";i.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${e}`||""),n("hashSet")):(l.location.hash=e||"",n("hashSet"))};h("init",(()=>{i.params.hashNavigation.enabled&&(()=>{if(!i.params.hashNavigation.enabled||i.params.history&&i.params.history.enabled)return;d=!0;const a=l.location.hash.replace("#","");if(a){const e=0,t=i.params.hashNavigation.getSlideIndex(i,a);i.slideTo(t||0,e,i.params.runCallbacksOnInit,!0)}i.params.hashNavigation.watchState&&o.addEventListener("hashchange",m)})()})),h("destroy",(()=>{i.params.hashNavigation.enabled&&i.params.hashNavigation.watchState&&o.removeEventListener("hashchange",m)})),h("transitionEnd _freeModeNoMomentumRelease",(()=>{d&&p()})),h("slideChange",(()=>{d&&i.params.cssMode&&p()}))}export{s as default};