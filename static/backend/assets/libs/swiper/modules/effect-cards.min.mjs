import{c as a}from"../shared/create-shadow.min.mjs";import{e as s}from"../shared/effect-init.min.mjs";import{e}from"../shared/effect-target.min.mjs";import{e as t}from"../shared/effect-virtual-transition-end.min.mjs";import{g as r}from"../shared/utils.min.mjs";function i(i){let{swiper:o,extendParams:n,on:l}=i;n({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),s({effect:"cards",swiper:o,on:l,setTranslate:()=>{const{slides:s,activeIndex:t,rtlTranslate:r}=o,i=o.params.cardsEffect,{startTranslate:n,isTouched:l}=o.touchEventsData,d=r?-o.translate:o.translate;for(let m=0;m<s.length;m+=1){const c=s[m],p=c.progress,f=Math.min(Math.max(p,-4),4);let h=c.swiperSlideOffset;o.params.centeredSlides&&!o.params.cssMode&&(o.wrapperEl.style.transform=`translateX(${o.minTranslate()}px)`),o.params.centeredSlides&&o.params.cssMode&&(h-=s[0].swiperSlideOffset);let M=o.params.cssMode?-h-o.translate:-h,u=0;const w=-100*Math.abs(f);let $=1,S=-i.perSlideRotate*f,x=i.perSlideOffset-.75*Math.abs(f);const b=o.virtual&&o.params.virtual.enabled?o.virtual.from+m:m,v=(b===t||b===t-1)&&f>0&&f<1&&(l||o.params.cssMode)&&d<n,y=(b===t||b===t+1)&&f<0&&f>-1&&(l||o.params.cssMode)&&d>n;if(v||y){const a=(1-Math.abs((Math.abs(f)-.5)/.5))**.5;S+=-28*f*a,$+=-.5*a,x+=96*a,u=-25*a*Math.abs(f)+"%"}if(M=f<0?`calc(${M}px ${r?"-":"+"} (${x*Math.abs(f)}%))`:f>0?`calc(${M}px ${r?"-":"+"} (-${x*Math.abs(f)}%))`:`${M}px`,!o.isHorizontal()){const a=u;u=M,M=a}const g=f<0?""+(1+(1-$)*f):""+(1-(1-$)*f),E=`\n        translate3d(${M}, ${u}, ${w}px)\n        rotateZ(${i.rotate?r?-S:S:0}deg)\n        scale(${g})\n      `;if(i.slideShadows){let s=c.querySelector(".swiper-slide-shadow");s||(s=a("cards",c)),s&&(s.style.opacity=Math.min(Math.max((Math.abs(f)-.5)/.5,0),1))}c.style.zIndex=-Math.abs(Math.round(p))+s.length,e(i,c).style.transform=E}},setTransition:a=>{const s=o.slides.map((a=>r(a)));s.forEach((s=>{s.style.transitionDuration=`${a}ms`,s.querySelectorAll(".swiper-slide-shadow").forEach((s=>{s.style.transitionDuration=`${a}ms`}))})),t({swiper:o,duration:a,transformElements:s})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!o.params.cssMode})})}export{i as default};