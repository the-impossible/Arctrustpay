import{g as l}from"../shared/ssr-window.esm.min.mjs";import{m as s,i as r,c as a,n as e,b as t}from"../shared/utils.min.mjs";import{c as o}from"../shared/create-element-if-not-defined.min.mjs";import{c as i}from"../shared/classes-to-selector.min.mjs";function n(n){let{swiper:c,extendParams:p,on:d,emit:b}=n;const m=l();let u,f,g,y,h=!1,v=null,C=null;function D(){if(!c.params.scrollbar.el||!c.scrollbar.el)return;const{scrollbar:l,rtlTranslate:s}=c,{dragEl:r,el:a}=l,e=c.params.scrollbar,t=c.params.loop?c.progressLoop:c.progress;let o=f,i=(g-f)*t;s?(i=-i,i>0?(o=f-i,i=0):-i+f>g&&(o=g+i)):i<0?(o=f+i,i=0):i+f>g&&(o=g-i),c.isHorizontal()?(r.style.transform=`translate3d(${i}px, 0, 0)`,r.style.width=`${o}px`):(r.style.transform=`translate3d(0px, ${i}px, 0)`,r.style.height=`${o}px`),e.hide&&(clearTimeout(v),a.style.opacity=1,v=setTimeout((()=>{a.style.opacity=0,a.style.transitionDuration="400ms"}),1e3))}function z(){if(!c.params.scrollbar.el||!c.scrollbar.el)return;const{scrollbar:l}=c,{dragEl:s,el:r}=l;s.style.width="",s.style.height="",g=c.isHorizontal()?r.offsetWidth:r.offsetHeight,y=c.size/(c.virtualSize+c.params.slidesOffsetBefore-(c.params.centeredSlides?c.snapGrid[0]:0)),f="auto"===c.params.scrollbar.dragSize?g*y:parseInt(c.params.scrollbar.dragSize,10),c.isHorizontal()?s.style.width=`${f}px`:s.style.height=`${f}px`,r.style.display=y>=1?"none":"",c.params.scrollbar.hide&&(r.style.opacity=0),c.params.watchOverflow&&c.enabled&&l.el.classList[c.isLocked?"add":"remove"](c.params.scrollbar.lockClass)}function w(l){return c.isHorizontal()?l.clientX:l.clientY}function E(l){const{scrollbar:s,rtlTranslate:r}=c,{el:a}=s;let e;e=(w(l)-t(a)[c.isHorizontal()?"left":"top"]-(null!==u?u:f/2))/(g-f),e=Math.max(Math.min(e,1),0),r&&(e=1-e);const o=c.minTranslate()+(c.maxTranslate()-c.minTranslate())*e;c.updateProgress(o),c.setTranslate(o),c.updateActiveIndex(),c.updateSlidesClasses()}function L(l){const s=c.params.scrollbar,{scrollbar:r,wrapperEl:a}=c,{el:e,dragEl:t}=r;h=!0,u=l.target===t?w(l)-l.target.getBoundingClientRect()[c.isHorizontal()?"left":"top"]:null,l.preventDefault(),l.stopPropagation(),a.style.transitionDuration="100ms",t.style.transitionDuration="100ms",E(l),clearTimeout(C),e.style.transitionDuration="0ms",s.hide&&(e.style.opacity=1),c.params.cssMode&&(c.wrapperEl.style["scroll-snap-type"]="none"),b("scrollbarDragStart",l)}function T(l){const{scrollbar:s,wrapperEl:r}=c,{el:a,dragEl:e}=s;h&&(l.preventDefault&&l.cancelable?l.preventDefault():l.returnValue=!1,E(l),r.style.transitionDuration="0ms",a.style.transitionDuration="0ms",e.style.transitionDuration="0ms",b("scrollbarDragMove",l))}function S(l){const s=c.params.scrollbar,{scrollbar:r,wrapperEl:a}=c,{el:t}=r;h&&(h=!1,c.params.cssMode&&(c.wrapperEl.style["scroll-snap-type"]="",a.style.transitionDuration=""),s.hide&&(clearTimeout(C),C=e((()=>{t.style.opacity=0,t.style.transitionDuration="400ms"}),1e3)),b("scrollbarDragEnd",l),s.snapOnRelease&&c.slideToClosest())}function x(l){const{scrollbar:s,params:r}=c,a=s.el;if(!a)return;const e=a,t=!!r.passiveListeners&&{passive:!1,capture:!1},o=!!r.passiveListeners&&{passive:!0,capture:!1};if(!e)return;const i="on"===l?"addEventListener":"removeEventListener";e[i]("pointerdown",L,t),m[i]("pointermove",T,t),m[i]("pointerup",S,o)}function H(){const{scrollbar:l,el:s}=c;c.params.scrollbar=o(c,c.originalParams.scrollbar,c.params.scrollbar,{el:"swiper-scrollbar"});const e=c.params.scrollbar;if(!e.el)return;let t,n;if("string"==typeof e.el&&c.isElement&&(t=c.el.querySelector(e.el)),t||"string"!=typeof e.el)t||(t=e.el);else if(t=m.querySelectorAll(e.el),!t.length)return;c.params.uniqueNavElements&&"string"==typeof e.el&&t.length>1&&1===s.querySelectorAll(e.el).length&&(t=s.querySelector(e.el)),t.length>0&&(t=t[0]),t.classList.add(c.isHorizontal()?e.horizontalClass:e.verticalClass),t&&(n=t.querySelector(i(c.params.scrollbar.dragClass)),n||(n=a("div",c.params.scrollbar.dragClass),t.append(n))),Object.assign(l,{el:t,dragEl:n}),e.draggable&&c.params.scrollbar.el&&c.scrollbar.el&&x("on"),t&&t.classList[c.enabled?"remove":"add"](...r(c.params.scrollbar.lockClass))}function k(){const l=c.params.scrollbar,s=c.scrollbar.el;s&&s.classList.remove(...r(c.isHorizontal()?l.horizontalClass:l.verticalClass)),c.params.scrollbar.el&&c.scrollbar.el&&x("off")}p({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),c.scrollbar={el:null,dragEl:null},d("changeDirection",(()=>{if(!c.scrollbar||!c.scrollbar.el)return;const l=c.params.scrollbar;let{el:r}=c.scrollbar;r=s(r),r.forEach((s=>{s.classList.remove(l.horizontalClass,l.verticalClass),s.classList.add(c.isHorizontal()?l.horizontalClass:l.verticalClass)}))})),d("init",(()=>{!1===c.params.scrollbar.enabled?$():(H(),z(),D())})),d("update resize observerUpdate lock unlock changeDirection",(()=>{z()})),d("setTranslate",(()=>{D()})),d("setTransition",((l,s)=>{!function(l){c.params.scrollbar.el&&c.scrollbar.el&&(c.scrollbar.dragEl.style.transitionDuration=`${l}ms`)}(s)})),d("enable disable",(()=>{const{el:l}=c.scrollbar;l&&l.classList[c.enabled?"remove":"add"](...r(c.params.scrollbar.lockClass))})),d("destroy",(()=>{k()}));const $=()=>{c.el.classList.add(...r(c.params.scrollbar.scrollbarDisabledClass)),c.scrollbar.el&&c.scrollbar.el.classList.add(...r(c.params.scrollbar.scrollbarDisabledClass)),k()};Object.assign(c.scrollbar,{enable:()=>{c.el.classList.remove(...r(c.params.scrollbar.scrollbarDisabledClass)),c.scrollbar.el&&c.scrollbar.el.classList.remove(...r(c.params.scrollbar.scrollbarDisabledClass)),H(),z(),D()},disable:$,updateSize:z,setTranslate:D,init:H,destroy:k})}export{n as default};