import e,{useEffect as r,useLayoutEffect as t,useContext as n,createContext as s,forwardRef as a,useState as l,useRef as i}from"react";import{S as c}from"./shared/swiper-core.mjs";import{g as o,m as u,a as p,u as d}from"./shared/update-on-virtual-data.mjs";import{d as m,w as f,n as w,b as v,a as h,e as E,u as y}from"./shared/update-swiper.mjs";function g(){return g=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},g.apply(this,arguments)}function b(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function x(r){const t=[];return e.Children.toArray(r).forEach((e=>{b(e)?t.push(e):e.props&&e.props.children&&x(e.props.children).forEach((e=>t.push(e)))})),t}function N(r){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return e.Children.toArray(r).forEach((e=>{if(b(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=x(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function O(e,n){return"undefined"==typeof window?r(e,n):t(e,n)}const S=s(null),j=()=>n(S),C=s(null),P=()=>n(C),$=a((function(t,n){let{className:s,tag:a="div",wrapperTag:b="div",children:x,onSwiper:S,...j}=void 0===t?{}:t,P=!1;const[$,k]=l("swiper"),[z,I]=l(null),[_,A]=l(!1),B=i(!1),T=i(null),F=i(null),H=i(null),L=i(null),U=i(null),V=i(null),q=i(null),D=i(null),{params:G,passedParams:J,rest:K,events:M}=o(j),{slides:Q,slots:R}=N(x),W=()=>{A(!_)};Object.assign(G.on,{_containerClasses(e,r){k(r)}});const X=()=>{Object.assign(G.on,M),P=!0;const e={...G};if(delete e.wrapperClass,F.current=new c(e),F.current.virtual&&F.current.params.virtual.enabled){F.current.virtual.slides=Q;const e={cache:!1,slides:Q,renderExternal:I,renderExternalUpdate:!1};E(F.current.params.virtual,e),E(F.current.originalParams.virtual,e)}};return T.current||X(),F.current&&F.current.on("_beforeBreakpoint",W),r((()=>()=>{F.current&&F.current.off("_beforeBreakpoint",W)})),r((()=>{!B.current&&F.current&&(F.current.emitSlidesClasses(),B.current=!0)})),O((()=>{if(n&&(n.current=T.current),T.current)return F.current.destroyed&&X(),u({el:T.current,nextEl:U.current,prevEl:V.current,paginationEl:q.current,scrollbarEl:D.current,swiper:F.current},G),S&&!F.current.destroyed&&S(F.current),()=>{F.current&&!F.current.destroyed&&F.current.destroy(!0,!1)}}),[]),O((()=>{!P&&M&&F.current&&Object.keys(M).forEach((e=>{F.current.on(e,M[e])}));const e=p(J,H.current,Q,L.current,(e=>e.key));return H.current=J,L.current=Q,e.length&&F.current&&!F.current.destroyed&&y({swiper:F.current,slides:Q,passedParams:J,changedParams:e,nextEl:U.current,prevEl:V.current,scrollbarEl:D.current,paginationEl:q.current}),()=>{M&&F.current&&Object.keys(M).forEach((e=>{F.current.off(e,M[e])}))}})),O((()=>{d(F.current)}),[z]),e.createElement(a,g({ref:T,className:m(`${$}${s?` ${s}`:""}`)},K),e.createElement(C.Provider,{value:F.current},R["container-start"],e.createElement(b,{className:f(G.wrapperClass)},R["wrapper-start"],G.virtual?function(r,t,n){if(!n)return null;const s=e=>{let r=e;return e<0?r=t.length+e:r>=t.length&&(r-=t.length),r},a=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:l,to:i}=n,c=r.params.loop?-t.length:0,o=r.params.loop?2*t.length:t.length,u=[];for(let e=c;e<o;e+=1)e>=l&&e<=i&&u.push(t[s(e)]);return u.map(((t,n)=>e.cloneElement(t,{swiper:r,style:a,key:t.props.virtualIndex||t.key||`slide-${n}`})))}(F.current,Q,z):Q.map(((r,t)=>e.cloneElement(r,{swiper:F.current,swiperSlideIndex:t}))),R["wrapper-end"]),w(G)&&e.createElement(e.Fragment,null,e.createElement("div",{ref:V,className:"swiper-button-prev"}),e.createElement("div",{ref:U,className:"swiper-button-next"})),v(G)&&e.createElement("div",{ref:D,className:"swiper-scrollbar"}),h(G)&&e.createElement("div",{ref:q,className:"swiper-pagination"}),R["container-end"]))}));$.displayName="Swiper";const k=a((function(r,t){let{tag:n="div",children:s,className:a="",swiper:c,zoom:o,lazy:u,virtualIndex:p,swiperSlideIndex:d,...f}=void 0===r?{}:r;const w=i(null),[v,h]=l("swiper-slide"),[E,y]=l(!1);function b(e,r,t){r===w.current&&h(t)}O((()=>{if(void 0!==d&&(w.current.swiperSlideIndex=d),t&&(t.current=w.current),w.current&&c){if(!c.destroyed)return c.on("_slideClass",b),()=>{c&&c.off("_slideClass",b)};"swiper-slide"!==v&&h("swiper-slide")}})),O((()=>{c&&w.current&&!c.destroyed&&h(c.getSlideClasses(w.current))}),[c]);const x={isActive:v.indexOf("swiper-slide-active")>=0,isVisible:v.indexOf("swiper-slide-visible")>=0,isPrev:v.indexOf("swiper-slide-prev")>=0,isNext:v.indexOf("swiper-slide-next")>=0},N=()=>"function"==typeof s?s(x):s;return e.createElement(n,g({ref:w,className:m(`${v}${a?` ${a}`:""}`),"data-swiper-slide-index":p,onLoad:()=>{y(!0)}},f),o&&e.createElement(S.Provider,{value:x},e.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof o?o:void 0},N(),u&&!E&&e.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&e.createElement(S.Provider,{value:x},N(),u&&!E&&e.createElement("div",{className:"swiper-lazy-preloader"})))}));k.displayName="SwiperSlide";export{$ as Swiper,k as SwiperSlide,P as useSwiper,j as useSwiperSlide};