import{IE11OrLess,Edge}from"./BrowserInfo.js";import{expando}from"./utils.js";import PluginManager from"./PluginManager.js";export default function dispatchEvent({sortable:e,rootEl:n,name:t,targetEl:o,cloneEl:r,toEl:l,fromEl:a,oldIndex:d,newIndex:i,oldDraggableIndex:s,newDraggableIndex:g,originalEvent:E,putSortable:p,extraEventProperties:u}){if(!(e=e||n&&n[expando]))return;let m,v=e.options,x="on"+t.charAt(0).toUpperCase()+t.substr(1);!window.CustomEvent||IE11OrLess||Edge?(m=document.createEvent("Event"),m.initEvent(t,!0,!0)):m=new CustomEvent(t,{bubbles:!0,cancelable:!0}),m.to=l||n,m.from=a||n,m.item=o||n,m.clone=r,m.oldIndex=d,m.newIndex=i,m.oldDraggableIndex=s,m.newDraggableIndex=g,m.originalEvent=E,m.pullMode=p?p.lastPutMode:void 0;let b={...u,...PluginManager.getEventProperties(t,e)};for(let e in b)m[e]=b[e];n&&n.dispatchEvent(m),v[x]&&v[x].call(e,m)}